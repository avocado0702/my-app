{"version":3,"sources":["main/core/components/plan_list.cljs"],"mappings":";AAIA,yCAAA,zCAAMA;AAAN,AAAA,0FAAA,yDAAA,2CAAA,6DAAA;AAAA,AAEuB,8BAAA,mFAAA,1GAACC;WAFxB;;AAIA,4CAAA,5CAAMC,gGACHC;AADH,AAAA,0FAAA,yDAAA,2CAAA,6DAAA;AAAA,AAGe,8BAAA,mFAAA,1GAACF,8KAC6BE;WAJ7C;;AAMA,8CAAA,9CAAMC,oGACHC,KAAKC;AADR,AAEE,IAAMC,cAAY,AAACC,gDAAO,AAAA,qFAAQH;AAAlC,AAEE;AAAA,AAAA,0FAAA,6EAAA,2CAAA,uDAAA,2CAAA,2DAAA,OAAA,yDAAA,iBAAA,sEAAA,MAAA,yDAAA,kBAAA,6DAAA;AAAA,AAKoB,AAAI,AAACI,sBAAOH,cAAcD;;AACtB,mBAAA,ZAACK,yBACeJ;WAPxC,mFAAA,mDAAA,mFAAA,4IAAA,3FAQmB,AAAA,qFAAQD,yFAAOH,0CAAW,AAAA,gFAAKG;;;AAEtD,2CAAA,3CAAMM,8FACHL;AADH,AAEE,IAAMM,KAAG,sDAAA,mFAAA,zIAACC;AAAV,AACE;AAAA,AAAA,0FAAA,sEAAA,2CAAA,uDAAA,2CAAA,uDAAA,QAAA,qEAAA,iBAAA,2DAAA,OAAA,kEAAA,uBAAA,mFAAA,iDAAA,eAAA,mFAI2Db,uDACnD,+CAAA,mFAAA,iDAAA,jLAAI,uBAAA,AAAAc,vBAACC,uCAAQH,qKAEX,iBAAAI,qBAAA,iEAAAC;AAAA,AAAA,YAAAC,kBAAA,KAAA;AAAA,AAAA,IAAAD,eAAAA;;AAAA,AAAA,IAAAE,qBAAA,AAAAC,cAAAH;AAAA,AAAA,GAAAE;AAAA,AAAA,IAAAF,eAAAE;AAAA,AAAA,GAAA,AAAAE,6BAAAJ;AAAA,IAAAK,kBA+6EqC,AAAA+B,sBAAApC;IA/6ErCM,qBAAA,AAAAC,gBAAAF;IAAAG,WAAA,AAAAC,uBAAAH;AAAA,AAAA,GAAA,AAAA,iBAAAI,WAAA;;AAAA,AAAA,GAAA,CAAAA,WAAAJ;AAAA,WAAA,AAAAK,eAAAN,gBAAAK,tCAAMtB;AAAN,AAAA,AAAA,AAAAwB,uBAAAJ,SAAA,oBAAA,0JAAA,2CAAA,oDACS,AAAA,gFAAKpB,tPACXD,4CAAaC,KAAKC;;AAFrB,eAAA,CAAAqB,WAAA;;;;AAAA;;;;;AAAA,OAAAG,qBAAA,AAAAC,gBAAAN,UAAA,AAAAO,uDAAA,AAAAC,qBAAAhB;;AAAA,OAAAa,qBAAA,AAAAC,gBAAAN,UAAA;;;AAAA,WAAA,AAAAS,gBAAAjB,vBAAMZ;AAAN,AAAA,OAAA8B,eAAA,oBAAA,0JAAA,2CAAA,mJAAA,AAAAH,uDAAA,AAAAI,eAAAnB,rKACS,AAAA,gFAAKZ,tPACXD,4CAAaC,KAAKC;;;AAFrB;;;;GAAA,KAAA;;AAAA,AAAA,OAAAU,mBAAA,AAAAF,gBAAYF;;;;AAI1B,yDAAA,zDAACyB,6HAEC,cAAAC,HAAKG;AAAL,AAAA,IAAAF,aAAAD;QAAA,AAAAE,4CAAAD,WAAA,IAAA,/DACMG;cADN,AAAAF,4CAAAD,WAAA,IAAA,rEACQpC;AADR,AAEE,YAAA,ZAACO;;AACD,YAAA,ZAACA,gCAAmCP;;AACpC,yDAAA,lDAACwC,+CAAOF,iEAAc,WAAKG;AAAL,AAAY,sDAAA,WAAAC,1DAACC;AAAD,AAAS,OAACC,6CAAE,AAAA,gFAAAF,kBAAQ1C;GAASyC;;;AAGnE,yDAAA,zDAACP,qHAEC,WAAKI;AAAL,AACE,YAAA,ZAAC/B;;AACD,IAAMsC,SAAO,2HAAA,zHAAI,AAACjC,uBAAO,AAAA,4FAAY0B,UAEtB,gQAAA,/PAAK,AAACQ,+CAAOC,cAAI,4CAAA,5CAACC,8FAAQ,AAAA,4FAAYV;AAFrD,AAIE,yDAAA,6EAAA,2CAAA,yDAAA,uDAAA,WAAA,sDAAA,3VAACE,+CAAOF,iEAAcW,4GAAUJ","names":["main.core.components.plan-list/add-btn","re-frame.core/dispatch","main.core.components.plan-list/delete-btn","item-id","main.core.components.plan-list/list-element","item","selected-item","input-value","reagent.core.atom","cljs.core/reset!","js/console.log","main.core.components.plan-list/plan-list","pl","re_frame.core.subscribe","cljs.core/deref","cljs.core/empty?","iter__5480__auto__","s__12413","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5478__auto__","size__5479__auto__","cljs.core/count","b__12415","cljs.core/chunk-buffer","i__12414","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__12412","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","re_frame.core.reg_event_db","p__12417","vec__12418","cljs.core.nth","db","_","cljs.core.update","items","p1__12416#","cljs.core.remove","cljs.core._EQ_","new-id","cljs.core.reduce","cljs.core/max","cljs.core.map","cljs.core/conj","cljs.core/chunk-first"],"sourcesContent":["(ns main.core.components.plan-list\r\n  (:require [reagent.core :as r]\r\n            [re-frame.core :as re-frame]))\r\n\r\n(defn add-btn\r\n  []\r\n  [:button {:on-click #(re-frame/dispatch [:add-item])} \"+\"])\r\n\r\n(defn delete-btn\r\n  [item-id] \r\n  [:button\r\n   {:on-click #(re-frame/dispatch\r\n                               [:delete-item item-id])} \"-\"])\r\n\r\n(defn list-element\r\n  [item selected-item]\r\n  (let [input-value (r/atom (:titel item))] ;; `input-value`\r\n                                            ;; \u5728\u8fd9\u91cc\u5b9a\u4e49\u5e76\u7528\u4e8e\u7ba1\u7406\u8f93\u5165\u6846\u7684\u72b6\u6001\r\n    (fn [] [:div.list-element\r\n            {:style {:padding \"15px\",\r\n                     :border \"1px solid #ccc\",\r\n                     :border-radius \"8px\",\r\n                     :cursor \"pointer\"},\r\n             :on-click #(do (reset! selected-item item)\r\n                            (js/console.log \"This item:\"\r\n                                            selected-item))}\r\n            [:div [:h4 (:titel item) [delete-btn (:id item)]]]])))\r\n\r\n(defn plan-list\r\n  [selected-item]\r\n  (let [pl (re-frame/subscribe [:get-plan-list])]\r\n    (fn [] [:div.plan-list\r\n            {:style {:width \"250px\",\r\n                     :border-right \"1px solid #ccc\",\r\n                     :padding \"10px\",\r\n                     :overflow-y \"auto\"}} [:h2 \"current plan\" [add-btn]]\r\n            (if (empty? @pl)\r\n              [:h3 \"you have no plan\"]\r\n              (for [item @pl] ;; \u5148\u904d\u5386\u6574\u4e2a\u96c6\u5408\r\n                ^{:key (:id item)} \r\n                [list-element item selected-item]))])))\r\n\r\n(re-frame/reg-event-db \r\n  :delete-item\r\n  (fn [db           ;; \u4e8b\u4ef6\u5904\u7406\u51fd\u6570\uff0c\u63a5\u6536 `cofx (db)`  \u548c\u4e8b\u4ef6\u53c2\u6570\r\n       [_ item-id]] ;; \u6bd4\u5982 `item-id` \u7684\u503c\u662f1\uff0c`_` \u5ffd\u7565\u4e86 `:delete-item`\r\n    (js/console.log \"Deleting a item:\")\r\n    (js/console.log \"Deletied item id:\" item-id)\r\n    (update db :plan-list (fn [items] (remove #(= (:id %) item-id) items)))))\r\n\r\n\r\n(re-frame/reg-event-db\r\n  :add-item\r\n  (fn [db]\r\n    (js/console.log \"Adding a new item\")\r\n    (let [new-id (if (empty? (:plan-list db)) ;; \u68c0\u67e5 `:plan-list` \u662f\u5426\u4e3a\u7a7a\r\n                   1\r\n                   (inc (reduce max (map :id (:plan-list db))))\r\n                   )] ;; \u5982\u679c\u4e3a\u7a7a\uff0c`new-id` \u4ece 1 \u5f00\u59cb\r\n      (update db :plan-list conj {:id new-id, :titel \"new plan\", :text \"new plan introduction\"}))))"]}