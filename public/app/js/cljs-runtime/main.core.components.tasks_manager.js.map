{"version":3,"sources":["main/core/components/tasks_manager.cljs"],"mappings":"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","names":["main.core.components.tasks-manager/add-task","tasks","next-id","cljs.core/deref","cljs.core/empty?","cljs.core.apply","cljs.core/max","cljs.core.map","js/module$node_modules$$mui$icons_material$AddCircle.default","cljs.core.swap_BANG_","cljs.core/conj","main.core.components.tasks-manager/task-manager","edited-tasks","selected-item-id","re_frame.core.subscribe","and__5000__auto__","cljs.core.not_EQ_","cljs.core/reset!","js/console.log","cljs.core/seq","iter__5480__auto__","s__29312","cljs.core/LazySeq","temp__5804__auto__","cljs.core/chunked-seq?","c__5478__auto__","size__5479__auto__","cljs.core/count","b__29314","cljs.core/chunk-buffer","i__29313","cljs.core/-nth","cljs.core/chunk-append","p1__29310#","cljs.core/chunk-cons","cljs.core/chunk","iter__29311","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","task","js/module$node_modules$$mui$material$node$TextField$index.default","cljs.core/assoc-in","cljs.core/chunk-first"],"sourcesContent":["(ns main.core.components.tasks-manager\r\n  (:require\r\n   [\"@mui/icons-material/AddCircle\" :default AddCircle]\r\n   [\"@mui/material/TextField\" :default TextField]\r\n   [re-frame.core :as re-frame]))\r\n\r\n(defn add-task\r\n  [tasks]\r\n  (let [next-id (if (empty? @tasks) 1 (inc (apply max (map :id @tasks))))]\r\n    [:> AddCircle\r\n     {:sx {:color \"#D3D3D3\",\r\n           \"&:hover\" {:color \"#1877f2\", :cursor \"pointer\"},\r\n           :margin-left \"10px\"},\r\n      :on-click #(swap! tasks conj {:id next-id, :description \"\"})}]))\r\n\r\n\r\n(defn task-manager\r\n  [edited-tasks]\r\n  (let [selected-item-id (re-frame/subscribe [:get-selected-plan-id])\r\n        tasks (re-frame/subscribe [:tasks-by-plan-id @selected-item-id])]\r\n    ;; \u521d\u59cb\u5316 edited-tasks \u53ea\u5728 tasks \u6539\u53d8\u65f6\r\n    (when (and @tasks (not= @edited-tasks @tasks)) (reset! edited-tasks @tasks))\r\n    (fn []\r\n      (js/console.log \"Rendering task-manager\")\r\n      (js/console.log \"selected-item-id:\" @selected-item-id)\r\n      (js/console.log \"Subscribed tasks:\" @tasks)\r\n      (js/console.log \"Edited tasks:\" @edited-tasks)\r\n      [:div.tasks-manager\r\n       {:style {:display \"flex\",\r\n                :flexDirection \"column\",\r\n                :gap \"10px\",\r\n                :marginBottom \"20px\"}}\r\n       ;; \u663e\u793a\u4efb\u52a1\u5217\u8868\r\n       (if (seq @edited-tasks)\r\n         (for [task @edited-tasks]\r\n           ^{:key (:id task)}\r\n           [:div.task-item\r\n            [:> TextField\r\n             {:label (str \"Task \" (:id task)),\r\n              :variant \"outlined\",\r\n              :value (:description task),\r\n              :on-change #(swap! edited-tasks assoc-in\r\n                            [(:id task) :description]\r\n                            (-> %\r\n                                .-target\r\n                                .-value)),\r\n              :fullWidth true,\r\n              :sx {:margin-top \"10px\"}}]])\r\n         [:p \"No tasks available\"])\r\n       ;; \u6dfb\u52a0\u4efb\u52a1\u6309\u94ae\r\n       [:div {:style {:display \"flex\", :justifyContent \"center\"}}\r\n        [add-task edited-tasks]]])))"]}